<!doctype html >
<html lang="en" >
<head>
<title> Create dynamic time user graph using Google Charts </title>
<meta charset="utf-8" >
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" > </script>
<!-- Load the AJAX API -->
<script type="text/javascript" src="https://www.google.com/jsapi" > </script>
<script type="text/javascript" >
    /* Get data from the database */
    function getData() {
        jQuery.ajax({
            url: 'ForCool.php',
            type: 'GET',
            dataType: 'json',
            mimeType: 'multipart/form-data',
            contentType: false,
            cache: false,
            processData: false,
            success: function( data, jqXHR ) {
                if( data == "null" ) {
                    // just in case
                } else {
                    drawGraph( data );
                }
            },
            error: function( textStatus ) {
                console.log(" error. damm. ");
            }
        });
    }

    /* Initialization of Google Charts API */
    google.load( "visualization" , "1", { packages: [ "corechart" ] });
    google.setOnLoadCallback( getData );


    /* Chart to render time-user graphs */
    function drawGraph( data ) {
        for( var i = data.length; i > 0; i-- ) {
            data[i] = data[i - 1];
        }
        data[0] = [ '日付', '温度' ];
        console.log( data );
        var chartData = google.visualization.arrayToDataTable( data );

        var options = {
            titleTextStyle : {color: 'blue', fontSize: 25, fontName: 'Arial', bold:'true'},
            width:1000,
            height:500,
            gridlines:4,
            explorer: {axis: 'horizontal',keepInBounds: true},
            backgroundColor: '#BFE6F6',
            explorer: {actions: ["dragToZoom", "rightClickToReset"]},
            //curveType: 'function',
            hAxis:{
              title: '日付',
              titleFontSize:25
            },
            vAxis:{
              title: '温度 (℃)',
              pointSize: 10,
              titleFontSize:25,
              dataOpacity: 0.3
            }
        };

        var chart = new google.visualization.AreaChart( document.getElementById( 'chart_div1' ) );
        chart.draw( chartData ,options);
    }
</script>
</head>
<body>
  <div>
      <h1 style="text-align: left; color: blue;  margin-left: 300px" id="chart_title">夜冷庫中 </h1>
      <p style="text-align: left; color: blue; Green; margin-left: 300px" id="chart_source">
                夜冷庫中の温度
      </p>
  <div id="chart_div1"></div>
